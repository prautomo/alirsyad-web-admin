<?php

namespace Tests\Unit;

use App\Models\Promo;
use PHPUnit\Framework\TestCase;

class ExampleTest extends TestCase
{
    /**
     * A basic test example.
     *
     * @return void
     */
    public function testBasicTest()
    {

        $request = json_decode('{"cart":{"e948762b-ada2-4dd7-88bf-2385488bd518":{"id":1,"mitra_id":3,"code":"d994d707-0bd1-4444-aaef-d16f50d11ffe","sku_id":"e948762b-ada2-4dd7-88bf-2385488bd518","name":"ENGSEL TEBAL 4\" IGM","description":"ENGSEL TEBAL 4\" IGM","price":10250,"stock":0,"available":1,"mitra_commission":0,"selling_price":15000,"rating":"0.00","total_rating":0,"is_sameday":0,"discount":1000,"spesification":"Merk : Decon\n            Dimensi Produk : 20 x 20 x 16.5 cm\n            Material : semen\n            Berat : 3 KG","keunggulan":"• Memiliki daya rekat tinggi\n            • Hasil akhir yang halus\n            • Menghemat penggunaan cat tembok","sub_category_id":1,"unit_id":2,"cover_id":1,"brand_id":1,"created_at":"2021-01-13T09:49:15.000000Z","updated_at":"2021-01-13T09:49:19.000000Z","deleted_at":null,"terjual":0,"cover":{"id":1,"product_id":1,"image_url":"https://res.cloudinary.com/dika/image/upload/v1603262545/placehoder_aebuys.png","created_at":"2021-01-13T09:49:15.000000Z","updated_at":"2021-01-13T09:49:15.000000Z"},"galery":[{"id":1,"product_id":1,"image_url":"https://res.cloudinary.com/dika/image/upload/v1603262545/placehoder_aebuys.png","created_at":"2021-01-13T09:49:15.000000Z","updated_at":"2021-01-13T09:49:15.000000Z"},{"id":405,"product_id":1,"image_url":"/images/dulux.png","created_at":"2021-01-13T09:49:19.000000Z","updated_at":"2021-01-13T09:49:19.000000Z"},{"id":406,"product_id":1,"image_url":"/images/dulux.png","created_at":"2021-01-13T09:49:19.000000Z","updated_at":"2021-01-13T09:49:19.000000Z"},{"id":407,"product_id":1,"image_url":"/images/dulux.png","created_at":"2021-01-13T09:49:19.000000Z","updated_at":"2021-01-13T09:49:19.000000Z"},{"id":408,"product_id":1,"image_url":"/images/dulux.png","created_at":"2021-01-13T09:49:19.000000Z","updated_at":"2021-01-13T09:49:19.000000Z"},{"id":409,"product_id":1,"image_url":"/images/dulux.png","created_at":"2021-01-13T09:49:19.000000Z","updated_at":"2021-01-13T09:49:19.000000Z"},{"id":410,"product_id":1,"image_url":"/images/dulux.png","created_at":"2021-01-13T09:49:19.000000Z","updated_at":"2021-01-13T09:49:19.000000Z"},{"id":411,"product_id":1,"image_url":"/images/dulux.png","created_at":"2021-01-13T09:49:19.000000Z","updated_at":"2021-01-13T09:49:19.000000Z"},{"id":412,"product_id":1,"image_url":"/images/dulux.png","created_at":"2021-01-13T09:49:19.000000Z","updated_at":"2021-01-13T09:49:19.000000Z"},{"id":413,"product_id":1,"image_url":"/images/dulux.png","created_at":"2021-01-13T09:49:19.000000Z","updated_at":"2021-01-13T09:49:19.000000Z"},{"id":414,"product_id":1,"image_url":"/images/dulux.png","created_at":"2021-01-13T09:49:19.000000Z","updated_at":"2021-01-13T09:49:19.000000Z"}],"mitra":{"id":1,"name":"Mitra 1","username":"mitra1","email":"mitra1@digibook.id","email_verified_at":"2021-01-13T09:49:14.000000Z","phone":"084321312312","phone_verified_at":"2021-01-13T09:49:14.000000Z","photo":"https://s.gravatar.com/avatar/8c2ef75f6fd262a0d4002961a9436e0f?s=200&r=pg","saldo":"0","address":null,"role":"MITRA","customer_type":"REGISTERED_USER","referral_code":null,"referral_use":null,"status":"AKTIF","created_at":"2021-01-13T09:49:14.000000Z","updated_at":"2021-01-13T09:49:14.000000Z","deleted_at":null},"brand":{"id":1,"name":"Unknown","description":"Unknown","images":"https://res.cloudinary.com/dika/image/upload/v1603262545/placehoder_aebuys.png","created_at":"2021-01-13T09:49:14.000000Z","updated_at":"2021-01-13T09:49:14.000000Z","deleted_at":null},"sub_category":{"id":1,"name":"Uncategorized","class":null,"category_id":1,"created_at":"2021-01-13T09:49:14.000000Z","updated_at":"2021-01-13T09:49:14.000000Z","deleted_at":null,"slug":"1-uncategorized"},"jumlah":3},"52076df0-fd05-4e63-be63-16fca8876ad1":{"id":204,"mitra_id":3,"code":"228853b2-ed49-43f9-93bf-e46b6e945633","sku_id":"52076df0-fd05-4e63-be63-16fca8876ad1","name":"ENGSEL TIPIS 3\" HPP","description":"ENGSEL TIPIS 3\" HPP","price":6041,"stock":0,"available":1,"mitra_commission":0,"selling_price":10000,"rating":"0.00","total_rating":0,"is_sameday":0,"discount":1000,"spesification":null,"keunggulan":null,"sub_category_id":1,"unit_id":2,"cover_id":204,"brand_id":1,"created_at":"2021-01-13T09:49:17.000000Z","updated_at":"2021-01-13T09:49:19.000000Z","deleted_at":null,"terjual":0,"cover":{"id":204,"product_id":204,"image_url":"https://res.cloudinary.com/dika/image/upload/v1603262545/placehoder_aebuys.png","created_at":"2021-01-13T09:49:17.000000Z","updated_at":"2021-01-13T09:49:17.000000Z"},"galery":[{"id":204,"product_id":204,"image_url":"https://res.cloudinary.com/dika/image/upload/v1603262545/placehoder_aebuys.png","created_at":"2021-01-13T09:49:17.000000Z","updated_at":"2021-01-13T09:49:17.000000Z"}],"mitra":{"id":3,"name":"Mitra 3","username":"mitra3","email":"mitra3@digibook.id","email_verified_at":"2021-01-13T09:49:14.000000Z","phone":"08953512312","phone_verified_at":"2021-01-13T09:49:14.000000Z","photo":"https://www.logodesign.net/logo/peace-bird-in-water-drop-3572ld.png","saldo":"0","address":null,"role":"MITRA","customer_type":"REGISTERED_USER","referral_code":null,"referral_use":null,"status":"AKTIF","created_at":"2021-01-13T09:49:14.000000Z","updated_at":"2021-01-13T09:49:14.000000Z","deleted_at":null},"brand":{"id":1,"name":"Unknown","description":"Unknown","images":"https://res.cloudinary.com/dika/image/upload/v1603262545/placehoder_aebuys.png","created_at":"2021-01-13T09:49:14.000000Z","updated_at":"2021-01-13T09:49:14.000000Z","deleted_at":null},"sub_category":{"id":1,"name":"Uncategorized","class":null,"category_id":1,"created_at":"2021-01-13T09:49:14.000000Z","updated_at":"2021-01-13T09:49:14.000000Z","deleted_at":null,"slug":"1-uncategorized"},"jumlah":4}},"voucher":{"id":3,"code":"PROMOMITRA3","name":"Promo Mitra 3","description":"Eos iste nihil facilis enim mollitia maxime excepturi eius sapiente repellendus dolores debitis sed.","cover_image":"/images/promo.jpg","start_date":"2020-12-20","end_date":"2021-03-22","potongan_nominal":0,"potongan_persen":10,"mitra_id":null,"created_at":"2021-01-14T01:15:49.000000Z","updated_at":"2021-01-14T01:15:49.000000Z","deleted_at":null}}',  true);
        $validated = Promo::validatePromo($request['cart'],  $request['voucher']);
        dd($validated);
    }
}
